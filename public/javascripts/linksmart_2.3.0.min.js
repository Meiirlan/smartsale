var LinkSmart=function(){String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var r=function(b,a){var c=1E5*Math.random();return{getAddress:function(){return"https:"==document.location.protocol?a.replace("#RND#",c):b.replace("#RND#",c)}}},z=function(f,a){var c="",d="",q="existing",h=!1,k=!1,g=!1,l=RegExp("(^|[\\s\\(\\[\\{\x3c\"`'])("+b.quote(a)+")(?:[\\s\\.,?!:;\\)\\]\\}\x3e\"`]|'(?!s|re|ve|d|m|t)|$)","gim");return{getXPath:function(){return f},getKeyword:function(){return a},
setDestination:function(a){c=a},getDestination:function(){return c},setWhitelistID:function(a){d=a},setType:function(a){q=a},getType:function(){return q},setInjected:function(a){h=a},isInjected:function(){return h},setInternal:function(a){k=a},isInternal:function(){return k},setDuplicate:function(a){g=a},isDuplicate:function(){return g},getJSONObj:function(){return{xpath:f,name:a,destination_uri:c,whitelist_id:d,injected:h}},getRegEx:function(){return l}}},t=function(b){var a={},c=null,d=0;return{addKeyword:function(c){void 0===
a[c.getKeyword()]?a[c.getKeyword()]=c:"whitelist"==c.getType()?(a[c.getKeyword()].setDuplicate(!0),a[c.getKeyword()]=c):c.setDuplicate(!0)},getElement:function(){return c},setElement:function(a){c=a},getXPath:function(){return b},getIndex:function(){return d},setIndex:function(a){d=a},getKeywords:function(){return a}}};"object"!==typeof LS_JSON&&(LS_JSON={});(function(){function b(a){return 10>a?"0"+a:a}function a(a){q.lastIndex=0;return q.test(a)?'"'+a.replace(q,function(a){var c=g[a];return"string"===
typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(b,d){var p,s,f,w,q=h,g,e=d[b];e&&("object"===typeof e&&"function"===typeof e.toLSJSON)&&(e=e.toLSJSON(b));"function"===typeof l&&(e=l.call(d,b,e));switch(typeof e){case "string":return a(e);case "number":return isFinite(e)?String(e):"null";case "boolean":case "null":return String(e);case "object":if(!e)return"null";h+=k;g=[];if("[object Array]"===Object.prototype.toString.apply(e)){w=e.length;for(p=0;p<w;p+=
1)g[p]=c(p,e)||"null";f=0===g.length?"[]":h?"[\n"+h+g.join(",\n"+h)+"\n"+q+"]":"["+g.join(",")+"]";h=q;return f}if(l&&"object"===typeof l)for(w=l.length,p=0;p<w;p+=1)"string"===typeof l[p]&&(s=l[p],(f=c(s,e))&&g.push(a(s)+(h?": ":":")+f));else for(s in e)Object.prototype.hasOwnProperty.call(e,s)&&(f=c(s,e))&&g.push(a(s)+(h?": ":":")+f);f=0===g.length?"{}":h?"{\n"+h+g.join(",\n"+h)+"\n"+q+"}":"{"+g.join(",")+"}";h=q;return f}}"function"!==typeof Date.prototype.toLSJSON&&(Date.prototype.toLSJSON=function(){return isFinite(this.valueOf())?
this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null},String.prototype.toLSJSON=Number.prototype.toLSJSON=Boolean.prototype.toLSJSON=function(){return this.valueOf()});var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,q=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
h,k,g={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof LS_JSON.stringify&&(LS_JSON.stringify=function(a,b,d){var f;k=h="";if("number"===typeof d)for(f=0;f<d;f+=1)k+=" ";else"string"===typeof d&&(k=d);if((l=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("LS_JSON.stringify");return c("",{"":a})});"function"!==typeof LS_JSON.parse&&(LS_JSON.parse=function(a,c){function b(a,d){var f,s,e=a[d];if(e&&"object"===
typeof e)for(f in e)Object.prototype.hasOwnProperty.call(e,f)&&(s=b(e,f),void 0!==s?e[f]=s:delete e[f]);return c.call(a,d,e)}var f;a=String(a);d.lastIndex=0;d.test(a)&&(a=a.replace(d,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return f=eval("("+a+")"),"function"===typeof c?b({"":f},
""):f;throw new SyntaxError("LS_JSON.parse");})})();var b={class2type:{},type:function(f){return null==f?String(f):"object"===typeof f||"function"===typeof f?b.class2type[Object.prototype.toString.call(f)]||"object":typeof f},isWindow:function(b){return null!=b&&b===b.window},isArraylike:function(f){var a=f.length,c=b.type(f);return b.isWindow(f)?!1:1===f.nodeType&&a?!0:"array"===c||"function"!==c&&(0===a||"number"===typeof a&&0<a&&a-1 in f)},each:function(f,a){var c,d=0;if(void 0!==f&&null!=f)if(b.isArraylike(f))for(;d<
f.length&&(c=a.call(f[d],d,f[d]),!1!==c);d++);else for(d in f)if(c=a.call(f[d],d,f[d]),!1===c)break},quote:function(b){return b.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")},decodeQueryString:function(f){f=f.substr(1);if(!f)return{};f=f.split("\x26");var a={};b.each(f,function(c,b){b=b.split("\x3d");a[decodeURIComponent(b[0])]=decodeURIComponent(b[1])});return a},genUUIDv4:function a(c){return c?(c^16*Math.random()>>c/4).toString(16):([1E7]+-1E3+-4E3+-8E3+-1E11).replace(/[018]/g,a)},obj:{clone:function(a){null!==
a&&void 0!==a||die("obj is undefined!");var c=function(){};c.prototype=a;c=new c;c._original=a;return c},copy:function(a){null!==a&&void 0!==a||die("obj is undefined!");var c={},b;for(b in a)c[b]=a[b];return c},extend:function(){for(var a=Array.prototype.slice.call(arguments),b=a.shift(),d,g,h=0;h<a.length;h++)for(g in d=a[h],d)b[g]=d[g];return b}},is:{blank:function(a){return""===a||null===a||void 0===a},present:function(a){return!b.is.blank(a)}},elem:{addEventListener:function(a,b,d){a.addEventListener?
a.addEventListener(b,d):a.attachEvent&&a.attachEvent("on"+b,d)},removeEventListener:function(a,b,d){document.removeEventListener?a.removeEventListener(b,d):a.detachEvent("on"+b,d)},is:{parent:function(a,c){return a.parentNode?a.parentNode==c?!0:b.elem.is.parent(a.parentNode,c):!1},parents:function(a,c){var d=!1;b.each(c,function(c,g){if(b.elem.is.parent(a,g))return d=!0,!1});return d}}},event:{preventDefault:function(a){a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)}},script:{load:function(a,
b){var d=document.createElement("script"),g;d.onload=d.onerror=d.onreadystatechange=function(){d.readyState&&!/^c|loade/.test(d.readyState)||g||(d.onload=d.onreadystatechange=null,g=!0,b())};d.async=!0;d.src=a;x.insertBefore(d,x.firstChild)}},evalXPath:function(a,b){var d=document.evaluate(a,b,null,9,null);return void 0!==d.singleNodeValue?d.singleNodeValue:null},JSONify:function(a){var c=[];b.each(a,function(a,b){c.push(b.getJSONObj())});return c}};b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),
function(a,c){b.class2type["[object "+c+"]"]=c.toLowerCase()});var y=function(){return{getUserID:function(){var a=this.get("_lsd0");a.length||(a=b.genUUIDv4(),this.set("_lsd0",a));return a},set:function(a,b){var d=new Date;d.setFullYear(parseInt(d.getFullYear(),10)+5,0,1);document.cookie=a+"\x3d"+b+"; expires\x3d"+d.toUTCString()+"; path\x3d/"},get:function(a){if(0<document.cookie.length){var b=document.cookie.indexOf(a+"\x3d");if(-1!==b){b=b+a.length+1;a=[];var d=document.cookie.indexOf(";",b);0<
d&&a.push(d);d=document.cookie.indexOf("|",b);0<d&&a.push(d);a=a.length?Math.min.apply(null,a):document.cookie.length;return b=document.cookie.substring(b,a)}}return""}}}(),g=function(){function a(a){var c=[];a.client_timestamp=""+(new Date).getTime();b.each(a,function(a,d){null!==d&&void 0!==d&&("string"!=b.type(d)&&(d=LS_JSON.stringify(d)),c.push([encodeURIComponent(a),encodeURIComponent(d)].join("\x3d")))});return c.join("\x26")}function c(){var a=u.mis.getAddress()+"/page/iframe#mis_url\x3d"+
u.mis.getAddress();k=document.createElement("iframe");k.setAttribute("id",h);k.setAttribute("name",h);k.setAttribute("height","0px");k.setAttribute("width","0px");k.setAttribute("frameborder","0");k.setAttribute("style","display:none");document.body.appendChild(k);b.elem.addEventListener(window,"message",function(a){l||"ls_ready"!=a.data||(l=!0,b.each(r,function(a,b){d(b)}),r=[])});k.src?k.src=a:null!==k.contentWindow&&null!==k.contentWindow.location?k.contentWindow.location=a:k.setAttribute("src",
a)}function d(a){l?k.contentWindow.postMessage(a,location.protocol+u.mis.getAddress()):(r.push(a),c())}function g(a){return function(b){var d=!1;"object"==typeof b&&(d=b);d&&a(d)}}var h="ls_statefull_iframe",k,t=0,l=!1,r=[],v={user:"",site_guid:"",pub_id:"",uri:""};return{jsonpRequest:function(d,c,h){t++;var k="LS_JSONCB_"+t;window[k]=g(h);c=b.obj.extend(c,v);c.jsoncallback=k;d=d+"?"+a(c);k=document.createElement("SCRIPT");k.async=!0;k.src=d;x.appendChild(k)},iframePost:function(c){c=b.obj.extend(c,
v);d(a(c))},init:function(a,b){v.user=y.getUserID();v.uri=document.location.href;this.setIDs(b,a)},setIDs:function(a,c){b.is.blank(a)||(v.site_guid=a);b.is.blank(c)||(v.pub_id=c)},buildQueryString:a,addUrlParam:function(a,b,c){c=b+"\x3d"+c;var d="?"+c;a=a.split("?");var g="?"+(2==a.length?a[1]:"");1<g.length&&((b=RegExp("[?\x26]"+b+"[^\x26]*").exec(g))?"\x26"==b[0].charAt(0)?d=g.replace(b,"\x26"+c):"?"==b[0].charAt(0)&&(d=g.replace(b,"?"+c)):d=g+"\x26"+c);return a[0]+d}}}(),E=function(){var a=!1,
c=!1,d="",q="",h=0,k=0,r=0,l=!0,y=0,v=[],p=[],s=[],x="",w=null,C=function(a){var d=null,n=null,g=0;try{b.each(a,function(a,c){b.is.blank(c)||(target=document.evaluate(c,document,null,9,null),void 0!==target.singleNodeValue&&null!=target.singleNodeValue&&(0===g||target.singleNodeValue.innerHTML.length<g)&&(d=target.singleNodeValue,g=d.innerHTML.length,n=c))})}catch(k){}null!=d&&null!=n&&(x=d.innerHTML,w=n,c=!0)},E=function(a,d,n,k,e){c=!0;a=b.evalXPath(a,document);if(null!=a){var h=[];if(d&&0<d.length&&
(blXpaths=[],b.each(d,function(a,c){b.is.blank(c)||blXpaths.push(c)}),0<blXpaths.length))try{for(result=document.evaluate(blXpaths.join("|"),document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),i=0,len=result.snapshotLength;i<len;i++)h.push(result.snapshotItem(i))}catch(l){}b.each(a.getElementsByTagName("a"),function(a,c){if(!c.getAttribute("data-ls-seen")&&!b.is.blank(c.href)&&!b.elem.is.parents(c,h)){var d=(c.innerText||c.textContent||"").trim(),n=c.getAttribute("href").toLowerCase();0==n.indexOf("#")||
(0==n.indexOf("javascript:")||b.is.blank(d))||(d=z(null,d),d.setDestination(c.href),d.setInjected(!0),d.setWhitelistID(null),d.setInternal(!0),d.setType("existing"),v.push(d),c.setAttribute("data-ls-seen","1"),H(c,d))}})}var D=0,B={},p=function(a,c){c.nodeType==Node.TEXT_NODE?q(a,c):"A"!=c.nodeName&&b.each(c.childNodes,function(b,c){p(a,c)})},q=function(a,c){var d=c.nodeValue,n=[];b.each(a,function(a,b){if(!b.isInjected())for(var c=b.getRegEx();m=c.exec(d);){m.index==c.lastIndex&&c.lastIndex++;var g=
m[1]||"",h=m[2];match={};match.keyword=b;match.startIndex=m.index+g.length;match.endIndex=match.startIndex+h.length-1;match.text=h;match.keywordText=b.getKeyword();n.push(match)}});if(!(0>=n.length)){n.sort(function(a,b){return a.startIndex<=b.startIndex&&a.endIndex>=b.startIndex?a.text.length>=b.text.length?-1:1:a.startIndex<b.startIndex&&a.endIndex<b.startIndex?-1:1});var h=[],A,G,p=0;b.each(n,function(a,b){if(!b.keyword.isInjected()&&b.startIndex>=p){var c=0;void 0!==B[b.keyword.getKeyword()]&&
(c=B[b.keyword.getKeyword()]);if(D>=k)return!1;if(c<e){A=d.substring(p,b.startIndex);var n=b.text,l=b.keyword,q=document.createElement("a");q.setAttribute("data-ls-seen","1");q.appendChild(document.createTextNode(n));l.isInternal()?q.href=g.addUrlParam(l.getDestination(),"lc","int_mb_1001"):q.href=l.getDestination();n=document.createElement("span");n.appendChild(q);"whitelist"==l.getType()&&(n.setAttribute("class","mandelbrot_refrag"),q.setAttribute("class","mandelbrot_refrag"));H(q,l);G=n;h.push(document.createTextNode(A));
h.push(G);p=b.endIndex+1;void 0===B[b.keyword.getKeyword()]&&D++;c++;B[b.keyword.getKeyword()]=c;b.keyword.setInjected(!0)}}});A=d.substring(p);0<A.length&&h.push(document.createTextNode(A));var l=c.parentNode||c.parentElement;b.each(h,function(a,b){l.insertBefore(b,c)});l.removeChild(c)}};b.each(n,function(a,b){void 0!==b.getElement()&&null!=b.getElement()&&p(b.getKeywords(),b.getElement());if(D>k)return!1})},e=function(){if(c){var a=[],e=[];b.each(v,function(b,c){c.isInjected()&&a.push(c)});b.each(p,
function(a,b){b.isInjected()&&e.push(b)});var n={target_html:x,xpath:w,impression_id:d,valid:l,keyword_sequence_id:q,keywords:b.JSONify(e),existing_keywords:b.JSONify(a),word_count:r,ab_mode:h,ab_injected:k,should_execute:y,keywords_count:e.length+a.length};g.iframePost(n)}},H=function(a,c){c.isInternal()||(a.setAttribute("rel","nofollow"),a.setAttribute("target","_blank"));b.elem.addEventListener(a,"mousedown",function(b){F(b,a,c)})},F=function(a,c,n){a=a||window.event;if(2==a.button||c.getAttribute("data-ls-clicked"))return!0;
c.setAttribute("data-ls-clicked","1");var h=[],k=[];b.each(v,function(a,b){b.isInjected()&&h.push(b)});b.each(p,function(a,b){b.isInjected()&&k.push(b)});var e={impression_id:d,keyword_sequence_id:q,type:n.getType(),keyword:n.getJSONObj(),keywords_count:k.length+h.length},l=!1;c.getAttribute("target")&&(l=!0);n.isInternal()&&!l?(g.jsonpRequest(u.ms.getAddress()+"/page/click",e,function(){window.location=c.href}),setTimeout(function(){window.location=c.href},400),b.event.preventDefault(a)):n.isInternal()&&
l?g.jsonpRequest(u.ms.getAddress()+"/page/click",e,null):n.isInternal()||"whitelist"!=n.getType()?n.isInternal()||(c.href=u.ms.getAddress()+"/page/click_proxy?"+g.buildQueryString(e)):g.jsonpRequest(u.ms.getAddress()+"/page/click",e,null)},I=function(a,c){if(null==a)return[];var d={},g=[],h=[];b.each(a,function(a,b){if("existing"!=b.keyword_type){var e=z(b.xpath,b.name);e.setDestination(b.destination_uri);e.setWhitelistID(b.whitelist_id);e.setType(c);e.setInternal(b.internal);"whitelist"==e.getType()?
p.push(e):"marketplace"==e.getType()&&s.push(e);var k=null;void 0===d[e.getXPath()]?(k=t(e.getXPath()),k.setIndex(b.element_index),d[e.getXPath()]=k,g.push(k),h.push(e.getXPath())):k=d[e.getXPath()];k.addKeyword(e)}});g.sort(function(a,b){return a.getIndex()>b.getIndex()?1:a.getIndex()<b.getIndex()?-1:0});try{if(result=document.evaluate(h.join("|"),document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),h.length==result.snapshotLength)for(i=0,len=result.snapshotLength;i<len;i++)g[i].setElement(result.snapshotItem(i));
else 0<result.snapshotLength&&b.each(g,function(a,b){result=document.evaluate(b.getXPath(),document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);0<result.snapshotLength&&b.setElement(result.snapshotItem(0))})}catch(e){}return g},J=function(c){var d=function(){a=!0;c()};a||null!=document.evaluate?d():b.script.load(u.cdn.getAddress()+"/xpath.js",d)};return{fetchPageData:function(){var a={referrer:document.referrer,href:location.href},p=u.ms.getAddress()+"/page/data";g.jsonpRequest(p,a,function(a){J(function(){g.setIDs(a.site_guid,
a.pub_id);b.is.blank(a.impression_id)||(d=a.impression_id);b.is.blank(a.keyword_sequence_id)||(q=a.keyword_sequence_id);b.is.blank(a.ab_mode)||(h=a.ab_mode);b.is.blank(a.ab_injected)||(k=a.ab_injected);b.is.blank(a.word_count)||(r=a.word_count);b.is.blank(a.valid)||(l=a.valid);b.is.blank(a.should_execute)||(y=a.should_execute);a.page_blacklisted||(a.xpaths&&0<a.xpaths.length&&a.instrument?C(a.xpaths):a.discover&&(x=document.body.parentNode.innerHTML,w=null,c=!0),a.xpath&&E(a.xpath,a.blacklisted_xpaths,
I(a.keywords,"whitelist"),a.keyword_count,a.keyword_frequency),e())})})}}}(),u={ms:r("//api.erovinmo.com","//ms-ssl.erovinmo.com"),mis:r("//api.erovinmo.com","//mis-ssl.erovinmo.com"),cdn:r("//cdn.linksmart.com","//976e11830d6abf79358a-c8b3424f9ab3814872085b6c0036edcb.ssl.cf1.rackcdn.com"),thirdPartyPixels:[r("//pixel.quantserve.com/pixel/p-VvcjNjXe1AqjN.gif?r\x3d#RND#","//pixel.quantserve.com/pixel/p-VvcjNjXe1AqjN.gif?r\x3d#RND#")]},x=document.getElementsByTagName("head")[0];(new Date).getTime();
var C=!1,F=function(){b.each(u.thirdPartyPixels,function(a,b){(new Image).src=b.getAddress()})};return{paginate:function(a){a={referrer:document.referrer,href:location.href};url=u.ms.getAddress()+"/page/view";g.jsonpRequest(url,a,null)},initWhenReady:function(){var a=this;b.elem.addEventListener(window,"load",function(){a.init()})},init:function(a,b){C||(C=!0,a=a?a:window._ls_pub_id?window._ls_pub_id:"",b=b?b:window._mb_site_guid?window._mb_site_guid:"",null==window.Node&&(window.Node={TEXT_NODE:3}),
F(),g.init(a,b),E.fetchPageData())}}}();LinkSmart.initWhenReady();function LinkSmart_paginate(){"undefined"!=typeof LinkSmart&&LinkSmart.paginate(document.location)}
function LinkSmart_registerPaginationEvent(r,z){if(null!=r&&null!=z)for(var t=document.body.getElementsByTagName(z),b=0;b<t.length;b++){var y=document.all?t[b].className:t[b].getAttribute("class");y&&RegExp(r).test(y)&&(t[b].addEventListener?t[b].addEventListener("click",function(b){LinkSmart_paginate()},!0):t[b].attachEvent&&t[b].attachEvent("onclick",function(b){LinkSmart_paginate()}))}}
try{void 0!==typeof _mb_site_guid&&"47ccd4d859728f71380a2280162f599d2f091bc0f9eb76b04bdf8d804324fb14"==_mb_site_guid&&(LinkSmart_registerPaginationEvent("wx-next-media","div"),LinkSmart_registerPaginationEvent("wx-prev-media","div"),LinkSmart_registerPaginationEvent("wx-next-immersive","div"),LinkSmart_registerPaginationEvent("wx-prev-immersive","div"),LinkSmart_registerPaginationEvent("wx-slide","li"))}catch(e$$2){};